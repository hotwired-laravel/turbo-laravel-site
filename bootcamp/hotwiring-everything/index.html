<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="canonical" href="https://turbo-laravel.com/bootcamp/hotwiring-everything">
        <meta name="description" content="Hotwiring Everything">
        <title>Hotwiring Everything</title>
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/manifest/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/manifest/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/manifest/favicon-16x16.png">
        <link rel="manifest" href="/assets/site.webmanifest">
        <link rel="preload" href="/assets/fonts/OpenSans-ExtraBold.ttf" as="font" type="font/ttf" crossorigin>
        <link rel="preload" href="/assets/fonts/Jost-Regular.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="/assets/fonts/Jost-Italic.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="stylesheet" href="/assets/build/css/main.css?id=7756ef47cdc6e051280b7984fd99b8f7">
        <script defer src="/assets/build/js/main.js?id=c803e2f5c4ee879500977d6eb36d43a5"></script>
    </head>
    <body class="text-zinc-900 text-xl font-sans antialiased bg-zinc-700/5 min-h-screen" data-controller="search" data-action="keydown@window->search#focus">
        <header class="px-4 py-6 lg:px-10 xl:px-20 lg:py-10 flex items-center space-x-2 justify-between">
  <div class="relative flex-1 lg:flex-auto flex justify-between items-center space-x-4 sm:space-x-2">
    <h1 class="text-3xl sm:text-4xl font-extrabold font-heading">
      <a href="/">Turbo Laravel</a>
    </h1>

    <nav class="inline-block lg:hidden">
      <details class="group" data-search-target="nav">
        <summary class="list-none">
          <span>
            <span class="sr-only">Navigation</span>

            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-8 rotate-0 transition group-open:rotate-90">
              <path class="opacity-100 transition group-open:opacity-0" stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
              <path class="transition opacity-0 group-open:opacity-100" stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
            </svg>
          </span>
        </summary>

        <div class="bg-white/50 z-10 absolute top-12 -inset-x-4 backdrop-blur-xl">
          <div class="bg-zinc-700/5 px-4 py-6 backdrop-blur">
            <form action="/docs/search" method="GET" class="px-4">
  <label for="search" class="sr-only">Search</label>
  <input data-search-target="mobile" type="search" name="q" class="search-input rounded border border-zinc-900/5 px-4 py-2 text-base leading-3 shadow w-full" placeholder="Search 2.x docs..." />
  <button type="submit" class="sr-only">Search</button>
</form>

            <ul class="space-y-6 -mb-2 mt-4">
              <li>
                <a href="/docs" class="px-4 py-2 font-medium rounded-full transition hover:bg-white/90 flex items-center space-x-1">
                  <span>Documentation</span>
                </a>

                              </li>
              <li>
                <a href="https://github.com/hotwired-laravel/turbo-laravel" class="px-4 py-2 font-medium rounded-full transition hover:bg-zinc-900/20">Source Code</a>
              </li>
              <li class="space-y-6">
                <a href="/bootcamp/introduction" class="px-4 py-2 font-medium rounded-full transition hover:bg-white/90">Bootcamp</a>
                  <div class="mx-4 pl-3 border-l-4 border-zinc-900/30">
  <ul class="">
        <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Prologue</li>
    <li class="children mt-2">
      <ul class="list-inside space-y-1 text-lg">
                <li><a href="/bootcamp/introduction" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Introduction</a></li>
              </ul>
    </li>
        <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Web</li>
    <li class="children mt-2">
      <ul class="list-inside space-y-1 text-lg">
                <li><a href="/bootcamp/installation" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Installation</a></li>
                <li><a href="/bootcamp/creating-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Creating Chirps</a></li>
                <li><a href="/bootcamp/listing-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Listing Chirps</a></li>
                <li><a href="/bootcamp/editing-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Editing Chirps</a></li>
                <li><a href="/bootcamp/deleting-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Deleting Chirps</a></li>
                <li><a href="/bootcamp/hotwiring-everything" class="font-bold transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Hotwiring Everything</a></li>
                <li><a href="/bootcamp/broadcasting" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Broadcasting</a></li>
              </ul>
    </li>
        <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Native</li>
    <li class="children mt-2">
      <ul class="list-inside space-y-1 text-lg">
                <li><a href="/bootcamp/native-setup" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Installation</a></li>
                <li><a href="/bootcamp/native-auth" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Authentication</a></li>
                <li><a href="/bootcamp/native-bridge-component" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Our First Bridge Component</a></li>
                <li><a href="/bootcamp/native-editing-modal" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Editing as a Modal</a></li>
                <li><a href="/bootcamp/native-confirmation" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Native Confirmation Dialog</a></li>
                <li><a href="/bootcamp/native-toasts" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Native Toasts</a></li>
              </ul>
    </li>
        <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Epilogue</li>
    <li class="children mt-2">
      <ul class="list-inside space-y-1 text-lg">
                <li><a href="/bootcamp/conclusion" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Conclusion</a></li>
              </ul>
    </li>
      </ul>
</div>
              </li>
              <!-- <li><a href="/demo" class="px-4 py-2 font-medium rounded-full transition hover:bg-white/90">Demo</a></li> -->
            </ul>
          </div>
        </div>
      </details>
    </nav>
  </div>

  <nav class="hidden lg:block">
    <ul class="flex items-center space-x-6 -my-2">
      <li>
        <div class="group relative py-2">
          <a href="/docs" class=" px-4 py-2 font-medium rounded-full transition hover:bg-white/90 flex items-center space-x-1">
            <span>Documentation</span>

            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
            </svg>
          </a>

          <div class="absolute p-4 top-14 inset-x opacity-0 scale-0 -translate-y-8 transition group-hover:translate-y-0 group-hover:scale-100 group-hover:opacity-100 rounded bg-white shadow z-10">
            <ul class="space-y-1">
              <li><a href="/docs/installation" class="block px-2 py-1 bg-zinc-900/20 rounded">Version <span class="">2.2.0</span></a></li>
              <li><a href="/1.x/docs/installation" class="block px-2 py-1  rounded">Version <span class="">1.12.2</span></a></li>
            </ul>
          </div>
        </div>
      </li>
      <li><a href="https://github.com/hotwired-laravel/turbo-laravel" class="px-4 py-2 font-medium rounded-full transition hover:bg-white/90">Source Code</a></li>
      <li><a href="/bootcamp/introduction" class="bg-white/90 px-4 py-2 font-medium rounded-full transition hover:bg-white/90">Bootcamp</a></li>
      <!-- <li><a href="/demo" class=" px-4 py-2 font-medium rounded-full transition hover:bg-white/90">Demo</a></li> -->
    </ul>
  </nav>
</header>

          <div class="bg-white/90 custom-border px-6 py-20 sm:flex space-x-6">
    <div class="sm:flex sm:space-x-6 sm:max-w-7xl w-full mx-auto">
      <aside class="relative w-1/4 hidden lg:block">
        <div class="sticky top-4 block space-y-4">
            <form action="/bootcamp/search" method="GET">
  <label for="search" class="sr-only">Search</label>
  <input data-search-target="web" type="text" name="q" placeholder="Search bootcamp... (press &quot;/&quot; to focus)" class="search-input rounded border border-zinc-900/5 px-4 py-2 text-base leading-3 shadow w-full" />
</form>

            <ul class="[&_.children]:mb-4">
    <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Prologue</li>
  <li class="children mt-2">
    <ul class="list-inside space-y-1 text-lg">
            <li><a href="/bootcamp/introduction" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Introduction</a></li>
          </ul>
  </li>
    <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Web</li>
  <li class="children mt-2">
    <ul class="list-inside space-y-1 text-lg">
            <li><a href="/bootcamp/installation" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Installation</a></li>
            <li><a href="/bootcamp/creating-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Creating Chirps</a></li>
            <li><a href="/bootcamp/listing-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Listing Chirps</a></li>
            <li><a href="/bootcamp/editing-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Editing Chirps</a></li>
            <li><a href="/bootcamp/deleting-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Deleting Chirps</a></li>
            <li><a href="/bootcamp/hotwiring-everything" class="bg-zinc-900/20 transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Hotwiring Everything</a></li>
            <li><a href="/bootcamp/broadcasting" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Broadcasting</a></li>
          </ul>
  </li>
    <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Native</li>
  <li class="children mt-2">
    <ul class="list-inside space-y-1 text-lg">
            <li><a href="/bootcamp/native-setup" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Installation</a></li>
            <li><a href="/bootcamp/native-auth" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Authentication</a></li>
            <li><a href="/bootcamp/native-bridge-component" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Our First Bridge Component</a></li>
            <li><a href="/bootcamp/native-editing-modal" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Editing as a Modal</a></li>
            <li><a href="/bootcamp/native-confirmation" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Native Confirmation Dialog</a></li>
            <li><a href="/bootcamp/native-toasts" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Native Toasts</a></li>
          </ul>
  </li>
    <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Epilogue</li>
  <li class="children mt-2">
    <ul class="list-inside space-y-1 text-lg">
            <li><a href="/bootcamp/conclusion" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Conclusion</a></li>
          </ul>
  </li>
  </ul>
        </div>
      </aside>

      <main class="flex-1 min-w-0">
        <div class="prose prose-xl prose-zinc prose-headings:font-heading prose-headings:font-extrabold max-w-none mx-auto w-full">
            <h1><em>06.</em> Hotwiring Everything</h1>

<p>So far, our application is quite basic. Out of Hotwire, we're only using Turbo Drive, which is enabled by default when we install and start Turbo.</p>

<h2>Inline forms with Turbo Frames</h2>

<p>Our application works, but we could improve it. Instead of sending users to a dedicated chirp creation form page, let's display the form inline right on the <code>chirps.index</code> page. To do that, we're going to use <a href="https://turbo.hotwired.dev/reference/frames">lazy-loading Turbo Frames</a>:</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>resources/views/chirps/index.blade.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-blade">&lt;<span class="hl-keyword">x-app-layout</span>&gt;
    &lt;<span class="hl-keyword">x-slot</span> <span class="hl-property">name</span>=&quot;header&quot;&gt;
        &lt;<span class="hl-keyword">h2</span> <span class="hl-property">class</span>=&quot;flex items-center space-x-1 font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight&quot;&gt;
            &lt;<span class="hl-keyword">x-breadcrumbs</span> :<span class="hl-property">links</span>=&quot;[__('Chirps')]&quot; /&gt;
        &lt;/<span class="hl-keyword">h2</span>&gt;
    &lt;/<span class="hl-keyword">x-slot</span>&gt;

    &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;py-12&quot;&gt;
        &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-2xl mx-auto sm:px-6 lg:px-8 space-y-6&quot;&gt;
            &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg&quot;&gt;
                &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-xl mx-auto&quot;&gt;
<span class="hl-deletion">                    <span class="hl-keyword">@include</span>(<span class="hl-value">'chirps.partials.new-chirp-trigger'</span>)</span>
<span class="hl-addition">                    &lt;<span class="hl-keyword">x-turbo::frame</span> <span class="hl-property">id</span>=&quot;create_chirp&quot; <span class="hl-property">src</span>=&quot;{{ <span class="hl-property">route</span>(<span class="hl-value">'chirps.create'</span>) }}&quot;&gt;</span>
<span class="hl-addition">                        <span class="hl-keyword">@include</span>(<span class="hl-value">'chirps.partials.new-chirp-trigger'</span>)</span>
<span class="hl-addition">                    &lt;/<span class="hl-keyword">x-turbo::frame</span>&gt;</span>

                    &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;mt-6 bg-white shadow-sm rounded-lg divide-y dark:bg-gray-700 dark:divide-gray-500&quot;&gt;
                        <span class="hl-keyword">@each</span>(<span class="hl-value">'chirps.partials.chirp'</span>, <span class="hl-variable">$chirps</span>, <span class="hl-value">'chirp'</span>)
                    &lt;/<span class="hl-keyword">div</span>&gt;
                &lt;/<span class="hl-keyword">div</span>&gt;
            &lt;/<span class="hl-keyword">div</span>&gt;
        &lt;/<span class="hl-keyword">div</span>&gt;
    &lt;/<span class="hl-keyword">div</span>&gt;
&lt;/<span class="hl-keyword">x-app-layout</span>&gt;
</code></pre>

<p>
</div>
</p>

<p>For that to work, we also need to wrap our create form with a matching Turbo Frame (by "matching" I mean same DOM ID):</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>resources/views/chirps/create.blade.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-blade">&lt;<span class="hl-keyword">x-app-layout</span> :<span class="hl-property">title</span>=&quot;__('Create Chirp')&quot;&gt;
    &lt;<span class="hl-keyword">x-slot</span> <span class="hl-property">name</span>=&quot;header&quot;&gt;
        &lt;<span class="hl-keyword">h2</span> <span class="hl-property">class</span>=&quot;flex items-center space-x-1 font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight&quot;&gt;
            &lt;<span class="hl-keyword">x-breadcrumbs</span> :<span class="hl-property">links</span>=&quot;[route('chirps.index') =&gt; __('Chirps'), __('New Chirp')]&quot; /&gt;
        &lt;/<span class="hl-keyword">h2</span>&gt;
    &lt;/<span class="hl-keyword">x-slot</span>&gt;

    &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;py-12&quot;&gt;
        &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-2xl mx-auto sm:px-6 lg:px-8 space-y-6&quot;&gt;
            &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg&quot;&gt;
                &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-xl mx-auto&quot;&gt;
<span class="hl-deletion">                    <span class="hl-keyword">@include</span>(<span class="hl-value">'chirps.partials.form'</span>)</span>
<span class="hl-addition">                    &lt;<span class="hl-keyword">x-turbo::frame</span> <span class="hl-property">id</span>=&quot;create_chirp&quot; <span class="hl-property">target</span>=&quot;_top&quot;&gt;</span>
<span class="hl-addition">                        <span class="hl-keyword">@include</span>(<span class="hl-value">'chirps.partials.form'</span>)</span>
<span class="hl-addition">                    &lt;/<span class="hl-keyword">x-turbo::frame</span>&gt;</span>
                &lt;/<span class="hl-keyword">div</span>&gt;
            &lt;/<span class="hl-keyword">div</span>&gt;
        &lt;/<span class="hl-keyword">div</span>&gt;
    &lt;/<span class="hl-keyword">div</span>&gt;
&lt;/<span class="hl-keyword">x-app-layout</span>&gt;
</code></pre>

<p>
</div>
</p>

<p>A few things about this:</p>

<ol>
<li>In the <code>chirps.index</code>, we specified the Turbo Frame with the <code>src</code> attribute, which indicates Turbo that this is lazy-loading Turbo Frame</li>
<li>The Turbo Frame in the <code>chirps.create</code> page has a <code>target="_top"</code> on it. That's not gonna be used, it's just in case someone opens that page directly by visiting <code>/chirps/create</code> or disables JavaScript (in this case, they would still see the link pointing to the create chirps page, so they would be able to use our application normally)</li>
</ol>

<p>If you try to use the form now, you will see a strange behavior where the form disappears after you submit it and the link is back. If you refresh the page, you'll see the chirp was successfully created.</p>

<p>That happens because we're redirecting users to the <code>chirps.index</code> page after the form submission. That page has a matching Turbo Frame, which contains the link. Nothing else on the page changes because of the Turbo Frame contains the page changes to only its fragment.</p>

<p>Let's make use of Turbo Streams to update our form with a clean one and prepend the recently created Chirp to the chirps list.</p>

<h3>Resetting the form and prepending Chirps to the list</h3>

<p>Before we change the <code>ChirpController</code>, let's give our list of chirps wrapper element an ID in the <code>chirps.index</code> page:</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>resources/views/chirps/index.blade.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-blade">&lt;<span class="hl-keyword">x-app-layout</span>&gt;
    &lt;<span class="hl-keyword">x-slot</span> <span class="hl-property">name</span>=&quot;header&quot;&gt;
        &lt;<span class="hl-keyword">h2</span> <span class="hl-property">class</span>=&quot;flex items-center space-x-1 font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight&quot;&gt;
            &lt;<span class="hl-keyword">x-breadcrumbs</span> :<span class="hl-property">links</span>=&quot;[__('Chirps')]&quot; /&gt;
        &lt;/<span class="hl-keyword">h2</span>&gt;
    &lt;/<span class="hl-keyword">x-slot</span>&gt;

    &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;py-12&quot;&gt;
        &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-2xl mx-auto sm:px-6 lg:px-8 space-y-6&quot;&gt;
            &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg&quot;&gt;
                &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-xl mx-auto&quot;&gt;
                    &lt;<span class="hl-keyword">x-turbo::frame</span> <span class="hl-property">id</span>=&quot;create_chirp&quot; <span class="hl-property">src</span>=&quot;{{ <span class="hl-property">route</span>(<span class="hl-value">'chirps.create'</span>) }}&quot;&gt;
                        <span class="hl-keyword">@include</span>(<span class="hl-value">'chirps.partials.new-chirp-trigger'</span>)
                    &lt;/<span class="hl-keyword">x-turbo::frame</span>&gt;

<span class="hl-deletion">                    &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;mt-6 bg-white shadow-sm rounded-lg divide-y dark:bg-gray-700 dark:divide-gray-500&quot;&gt;</span>
<span class="hl-addition">                    &lt;<span class="hl-keyword">div</span> <span class="hl-property">id</span>=&quot;chirps&quot; <span class="hl-property">class</span>=&quot;mt-6 bg-white shadow-sm rounded-lg divide-y dark:bg-gray-700 dark:divide-gray-500&quot;&gt;</span>
                        <span class="hl-keyword">@each</span>(<span class="hl-value">'chirps.partials.chirp'</span>, <span class="hl-variable">$chirps</span>, <span class="hl-value">'chirp'</span>)
                    &lt;/<span class="hl-keyword">div</span>&gt;
                &lt;/<span class="hl-keyword">div</span>&gt;
            &lt;/<span class="hl-keyword">div</span>&gt;
        &lt;/<span class="hl-keyword">div</span>&gt;
    &lt;/<span class="hl-keyword">div</span>&gt;
&lt;/<span class="hl-keyword">x-app-layout</span>&gt;
</code></pre>

<p>
</div>
</p>

<p>Okay, now we can change the <code>store</code> action in our <code>ChirpController</code> to return 3 Turbo Streams if the client supports it, one to update the form with a clean one, another to prepend the new chirp to the list, and another to append the flash message:</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>app/Http/Controllers/ChirpController.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-php"><span class="hl-keyword">&lt;?php</span>

<span class="hl-comment">// ...</span>

<span class="hl-keyword">class</span> <span class="hl-type">ChirpController</span> <span class="hl-keyword">extends</span> <span class="hl-type">Controller</span>
{
    <span class="hl-comment">// ...</span>

    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">store</span>(<span class="hl-injection"><span class="hl-type">Request</span> $request</span>)
    {
        <span class="hl-variable">$validated</span> = <span class="hl-variable">$request</span>-&gt;<span class="hl-property">validate</span>([
            <span class="hl-value">'message'</span> =&gt; [<span class="hl-value">'required'</span>, <span class="hl-value">'string'</span>, <span class="hl-value">'max:255'</span>],
        ]);

<span class="hl-deletion">        <span class="hl-variable">$request</span>-&gt;<span class="hl-property">user</span>()-&gt;<span class="hl-property">chirps</span>()-&gt;<span class="hl-property">create</span>(<span class="hl-variable">$validated</span>);</span>
<span class="hl-addition">        <span class="hl-variable">$chirp</span> = <span class="hl-variable">$request</span>-&gt;<span class="hl-property">user</span>()-&gt;<span class="hl-property">chirps</span>()-&gt;<span class="hl-property">create</span>(<span class="hl-variable">$validated</span>);</span>
<span class="hl-addition"></span>
<span class="hl-addition">        <span class="hl-keyword">if</span> (<span class="hl-variable">$request</span>-&gt;<span class="hl-property">wantsTurboStream</span>()) {</span>
<span class="hl-addition">            <span class="hl-keyword">return</span> <span class="hl-property">turbo_stream</span>([</span>
<span class="hl-addition">                <span class="hl-property">turbo_stream</span>(<span class="hl-variable">$chirp</span>, <span class="hl-value">'prepend'</span>),</span>
<span class="hl-addition">                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">update</span>(<span class="hl-value">'create_chirp'</span>, <span class="hl-property">view</span>(<span class="hl-value">'chirps.partials.form'</span>)),</span>
<span class="hl-addition">                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">append</span>(<span class="hl-value">'notifications'</span>, <span class="hl-property">view</span>(<span class="hl-value">'layouts.partials.notice'</span>, [</span>
<span class="hl-addition">                    <span class="hl-value">'message'</span> =&gt; <span class="hl-property">__</span>(<span class="hl-value">'Chirp created.'</span>),</span>
<span class="hl-addition">                ])),</span>
<span class="hl-addition">            ]);</span>
<span class="hl-addition">        }</span>

        <span class="hl-keyword">return</span> <span class="hl-property">redirect</span>()
            -&gt;<span class="hl-property">route</span>(<span class="hl-value">'chirps.index'</span>)
            -&gt;<span class="hl-property">with</span>(<span class="hl-value">'status'</span>, <span class="hl-property">__</span>(<span class="hl-value">'Chirp created.'</span>));
    }

    <span class="hl-comment">// ...</span>
}
</code></pre>

<p>
</div>
</p>

<p>If you try to create one now, you'll notice Turbo Laravel expects to find the Chirp partial at <code>resources/views/chirps/_chirp.blade.php</code>, but we are using a folder-based partial convention. This pattern is common in Laravel, so Turbo Laravel understands that as well. Let's update the package to use that. Update your <code>AppServiceProvider</code> like so:</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>app/Providers/AppServiceProvider.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-php"><span class="hl-keyword">&lt;?php</span>

<span class="hl-keyword">namespace</span> <span class="hl-type">App\Providers</span>;

<span class="hl-addition"><span class="hl-keyword">use</span> <span class="hl-type">HotwiredLaravel\TurboLaravel\Facades\Turbo</span>;</span>
<span class="hl-keyword">use</span> <span class="hl-type">Illuminate\Support\ServiceProvider</span>;

<span class="hl-keyword">class</span> <span class="hl-type">AppServiceProvider</span> <span class="hl-keyword">extends</span> <span class="hl-type">ServiceProvider</span>
{
    <span class="hl-comment">// ...</span>

    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">boot</span>(): <span class="hl-type">void</span>
    {
<span class="hl-addition">        <span class="hl-type">Turbo</span>::<span class="hl-property">usePartialsSubfolderPattern</span>();</span>
    }
}
</code></pre>

<p>
</div>
</p>

<p>Now if you try creating a Chirp, you should see the newly created Chirp at the top of the chirps list, the form should have been cleared, and a flash message showed up.</p>

<p><img src="/assets/images/bootcamp/hotwiring-creating-chirps.png" alt="Hotwiring Chirps Creationg" /></p>

<p>Let's also implement inline editing for our chirps.</p>

<h2>Displaying the edit chirps form inline</h2>

<p>To do that, we need to tweak our <code>chirps.partials.chirp</code> partial and wrap it with a Turbo Frame. Instead of showing you a long Git diff, replace the existing partial with this one:</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>resources/views/chirps/partials/chirp.blade.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-blade"><span class="hl-deletion">&lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;p-6 flex space-x-2&quot;&gt;</span>
<span class="hl-addition">&lt;<span class="hl-keyword">x-turbo::frame</span> :<span class="hl-property">id</span>=&quot;$chirp&quot; <span class="hl-property">class</span>=&quot;p-6 flex space-x-2&quot;&gt;</span>
    &lt;<span class="hl-keyword">svg</span> <span class="hl-property">xmlns</span>=&quot;http://www.w3.org/2000/svg&quot; <span class="hl-property">class</span>=&quot;h-6 w-6 text-gray-600 dark:text-gray-400 -scale-x-100&quot; <span class="hl-property">fill</span>=&quot;none&quot; <span class="hl-property">viewBox</span>=&quot;0 0 24 24&quot; <span class="hl-property">stroke</span>=&quot;currentColor&quot; <span class="hl-property">stroke-width</span>=&quot;2&quot;&gt;
        <span class="hl-comment">&lt;!-- ... --&gt;</span>
    &lt;/<span class="hl-keyword">svg</span>&gt;

    &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;flex-1&quot;&gt;
        <span class="hl-comment">&lt;!-- ... --&gt;</span>
    &lt;/<span class="hl-keyword">div</span>&gt;
<span class="hl-deletion">&lt;/<span class="hl-keyword">div</span>&gt;</span>
<span class="hl-addition">&lt;/<span class="hl-keyword">x-turbo::frame</span>&gt;</span>
</code></pre>

<p>
</div>
</p>

<p>Now, let's also update the <code>chirps.edit</code> page to add a wrapping Turbo Frame around the form there:</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>resources/views/chirps/edit.blade.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-blade">&lt;<span class="hl-keyword">x-app-layout</span> :<span class="hl-property">title</span>=&quot;__('Edit Chirp')&quot;&gt;
    &lt;<span class="hl-keyword">x-slot</span> <span class="hl-property">name</span>=&quot;header&quot;&gt;
        &lt;<span class="hl-keyword">h2</span> <span class="hl-property">class</span>=&quot;flex items-center space-x-1 font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight&quot;&gt;
            &lt;<span class="hl-keyword">x-breadcrumbs</span> :<span class="hl-property">links</span>=&quot;[route('chirps.index') =&gt; __('Chirps'), __('Edit Chirp')]&quot; /&gt;
        &lt;/<span class="hl-keyword">h2</span>&gt;
    &lt;/<span class="hl-keyword">x-slot</span>&gt;

    &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;py-12&quot;&gt;
        &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-2xl mx-auto sm:px-6 lg:px-8 space-y-6&quot;&gt;
            &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg&quot;&gt;
                &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-xl mx-auto&quot;&gt;
<span class="hl-deletion">                    <span class="hl-keyword">@include</span>(<span class="hl-value">'chirps.partials.form'</span>, [<span class="hl-value">'chirp'</span> =&gt; <span class="hl-variable">$chirp</span>])</span>
<span class="hl-addition">                    &lt;<span class="hl-keyword">x-turbo::frame</span> :<span class="hl-property">id</span>=&quot;$chirp&quot; <span class="hl-property">target</span>=&quot;_top&quot;&gt;</span>
<span class="hl-addition">                        <span class="hl-keyword">@include</span>(<span class="hl-value">'chirps.partials.form'</span>, [<span class="hl-value">'chirp'</span> =&gt; <span class="hl-variable">$chirp</span>])</span>
<span class="hl-addition">                    &lt;/<span class="hl-keyword">x-turbo::frame</span>&gt;</span>
                &lt;/<span class="hl-keyword">div</span>&gt;
            &lt;/<span class="hl-keyword">div</span>&gt;
        &lt;/<span class="hl-keyword">div</span>&gt;
    &lt;/<span class="hl-keyword">div</span>&gt;
&lt;/<span class="hl-keyword">x-app-layout</span>&gt;
</code></pre>

<p>
</div>
</p>

<h2>Updating inline edit form with the chirps partial</h2>

<p>Now, if you try clicking on the edit button, you should see the form appearing inline! If you submit it, you will see the change takes place already. That's awesome, right? Well, not so much. See, we can see the change because after the chirp is updated, the controller redirects the user to the index page and it happens that the chirp is rendered on that page, so it finds a matching Turbo Frame. If that wasn't the case, we would see a strange behavior.</p>

<p>Let's change the <code>update</code> action in the <code>ChirpController</code> to return a Turbo Stream with the updated Chirp partial if the client supports it:</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>app/Controllers/ChirpController.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-php"><span class="hl-keyword">&lt;?php</span>

<span class="hl-comment">// ...</span>

<span class="hl-keyword">class</span> <span class="hl-type">ChirpController</span> <span class="hl-keyword">extends</span> <span class="hl-type">Controller</span>
{
    <span class="hl-comment">// ...</span>

    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">update</span>(<span class="hl-injection"><span class="hl-type">Request</span> $request, <span class="hl-type">Chirp</span> $chirp</span>)
    {
        <span class="hl-variable">$this</span>-&gt;<span class="hl-property">authorize</span>(<span class="hl-value">'update'</span>, <span class="hl-variable">$chirp</span>);

        <span class="hl-variable">$validated</span> = <span class="hl-variable">$request</span>-&gt;<span class="hl-property">validate</span>([
            <span class="hl-value">'message'</span> =&gt; [<span class="hl-value">'required'</span>, <span class="hl-value">'string'</span>, <span class="hl-value">'max:255'</span>],
        ]);

        <span class="hl-variable">$chirp</span>-&gt;<span class="hl-property">update</span>(<span class="hl-variable">$validated</span>);

<span class="hl-addition">        <span class="hl-keyword">if</span> (<span class="hl-variable">$request</span>-&gt;<span class="hl-property">wantsTurboStream</span>()) {</span>
<span class="hl-addition">            <span class="hl-keyword">return</span> <span class="hl-property">turbo_stream</span>([</span>
<span class="hl-addition">                <span class="hl-property">turbo_stream</span>(<span class="hl-variable">$chirp</span>),</span>
<span class="hl-addition">                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">append</span>(<span class="hl-value">'notifications'</span>, <span class="hl-property">view</span>(<span class="hl-value">'layouts.partials.notice'</span>, [</span>
<span class="hl-addition">                    <span class="hl-value">'message'</span> =&gt; <span class="hl-property">__</span>(<span class="hl-value">'Chirp updated.'</span>),</span>
<span class="hl-addition">                ])),</span>
<span class="hl-addition">            ]);</span>
<span class="hl-addition">        }</span>

        <span class="hl-keyword">return</span> <span class="hl-property">redirect</span>()
            -&gt;<span class="hl-property">route</span>(<span class="hl-value">'chirps.index'</span>)
            -&gt;<span class="hl-property">with</span>(<span class="hl-value">'notice'</span>, <span class="hl-property">__</span>(<span class="hl-value">'Chirp updated.'</span>));
    }

    <span class="hl-comment">// ...</span>
}
</code></pre>

<p>
</div>
</p>

<p>Now, if you try editing a chirp, you should see the same thing as before, but now we're sure that our chirp will just be updated no matter if it's present in the index listing of chirps or not after the form is submitted. Yay!</p>

<p><img src="/assets/images/bootcamp/hotwiring-editing-chirp.png" alt="Hotwiring Editing Chirps" /></p>

<h2>Deleting Chirps with Turbo Streams</h2>

<p>If you try deleting a Chirp now that they are wrapped in a <code>turbo-frame</code> you'll notice the Chirp itself is gone, but for the wrong reason. That happens because after deleting a Chirp, we're also redirecting users to the index page and it happens that there's no chirp in there because it's gone from the database. Since Turbo didn't find a matching Turbo Frame, it removes the frame's content!</p>

<p>Let's change the <code>destroy</code> action in our <code>ChirpController</code> to respond with a remove Turbo Stream whenever a Chirp is deleted and the client supports it:</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>app/Controllers/ChirpController.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-php"><span class="hl-keyword">&lt;?php</span>

<span class="hl-comment">// ...</span>

<span class="hl-keyword">class</span> <span class="hl-type">ChirpController</span> <span class="hl-keyword">extends</span> <span class="hl-type">Controller</span>
{
    <span class="hl-comment">// ...</span>

    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">destroy</span>(<span class="hl-injection"><span class="hl-type">Chirp</span> $chirp</span>)
    {
        <span class="hl-variable">$this</span>-&gt;<span class="hl-property">authorize</span>(<span class="hl-value">'delete'</span>, <span class="hl-variable">$chirp</span>);

        <span class="hl-variable">$chirp</span>-&gt;<span class="hl-property">delete</span>();

<span class="hl-addition">        <span class="hl-keyword">if</span> (<span class="hl-property">request</span>()-&gt;<span class="hl-property">wantsTurboStream</span>()) {</span>
<span class="hl-addition">            <span class="hl-keyword">return</span> <span class="hl-property">turbo_stream</span>([</span>
<span class="hl-addition">                <span class="hl-property">turbo_stream</span>(<span class="hl-variable">$chirp</span>),</span>
<span class="hl-addition">                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">append</span>(<span class="hl-value">'notifications'</span>, <span class="hl-property">view</span>(<span class="hl-value">'layouts.partials.notice'</span>, [</span>
<span class="hl-addition">                    <span class="hl-value">'message'</span> =&gt; <span class="hl-property">__</span>(<span class="hl-value">'Chirp deleted.'</span>),</span>
<span class="hl-addition">                ])),</span>
<span class="hl-addition">            ]);</span>
<span class="hl-addition">        }</span>

        <span class="hl-keyword">return</span> <span class="hl-property">redirect</span>()
            -&gt;<span class="hl-property">route</span>(<span class="hl-value">'chirps.index'</span>)
            -&gt;<span class="hl-property">with</span>(<span class="hl-value">'notice'</span>, <span class="hl-property">__</span>(<span class="hl-value">'Chirp deleted.'</span>));
    }
}
</code></pre>

<p>
</div>
</p>

<p>And that's it!</p>

<h2>Turbo Stream Flash Macro</h2>

<p>So far we've been using the default action methods provided by the Turbo Laravel package. Let's add a <code>notice</code> macro to the <code>PendingTurboStreamResponse</code> class, which the <code>turbo_stream()</code> function returns (except when we give it an array, which then it returns an instance of the <code>MultiplePendingTurboStreamResponse</code> class). This <code>notice</code> macro will work as a shorthand for the creating Turbo Streams to append notifications on the page:</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>app/Providers/AppServiceProvider.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-php"><span class="hl-keyword">&lt;?php</span>

<span class="hl-keyword">namespace</span> <span class="hl-type">App\Providers</span>;

<span class="hl-keyword">use</span> <span class="hl-type">HotwiredLaravel\TurboLaravel\Facades\Turbo</span>;
<span class="hl-keyword">use</span> <span class="hl-type">Illuminate\Support\ServiceProvider</span>;
<span class="hl-addition"><span class="hl-keyword">use</span> <span class="hl-type">HotwiredLaravel\TurboLaravel\Http\PendingTurboStreamResponse</span>;</span>

<span class="hl-keyword">class</span> <span class="hl-type">AppServiceProvider</span> <span class="hl-keyword">extends</span> <span class="hl-type">ServiceProvider</span>
{
    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">boot</span>()
    {
        <span class="hl-type">Turbo</span>::<span class="hl-property">usePartialsSubfolderPattern</span>();

<span class="hl-addition">        <span class="hl-type">PendingTurboStreamResponse</span>::<span class="hl-property">macro</span>(<span class="hl-value">'notice'</span>, <span class="hl-keyword">function</span> (<span class="hl-injection">$message</span>) {</span>
<span class="hl-addition">            <span class="hl-keyword">return</span> <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">append</span>(<span class="hl-value">'notifications'</span>, <span class="hl-property">view</span>(<span class="hl-value">'layouts.partials.notice'</span>, [</span>
<span class="hl-addition">                <span class="hl-value">'message'</span> =&gt; <span class="hl-variable">$message</span>,</span>
<span class="hl-addition">            ]));</span>
<span class="hl-addition">        });</span>
    }
}
</code></pre>

<p>
</div>
</p>

<p>Now, our controllers can be cleaned up a bit:</p>

<p><div class="[&>p]:m-0 [&>pre]:m-0 [&>pre]:rounded-none rounded-lg my-8 bg-[#1e1e2e]" data-controller="clipboard">
    <div class="pt-3 pb-2.5 px-6 flex items-center justify-between text-base text-gray-400 border-b border-gray-700">
        <div class="min-w-0 overflow-auto font-mono flex items-center space-x-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>

            <span>app/Http/Controllers/ChirpController.php</span>
        </div>

            </div>

    </p>

<pre><code class="language-php"><span class="hl-keyword">&lt;?php</span>

<span class="hl-comment">// ...</span>

<span class="hl-keyword">class</span> <span class="hl-type">ChirpController</span> <span class="hl-keyword">extends</span> <span class="hl-type">Controller</span>
{
    <span class="hl-comment">// ...</span>

    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">store</span>(<span class="hl-injection"><span class="hl-type">Request</span> $request</span>)
    {
        <span class="hl-variable">$validated</span> = <span class="hl-variable">$request</span>-&gt;<span class="hl-property">validate</span>([
            <span class="hl-value">'message'</span> =&gt; [<span class="hl-value">'required'</span>, <span class="hl-value">'string'</span>, <span class="hl-value">'max:255'</span>],
        ]);

        <span class="hl-variable">$chirp</span> = <span class="hl-variable">$request</span>-&gt;<span class="hl-property">user</span>()-&gt;<span class="hl-property">chirps</span>()-&gt;<span class="hl-property">create</span>(<span class="hl-variable">$validated</span>);

        <span class="hl-keyword">if</span> (<span class="hl-variable">$request</span>-&gt;<span class="hl-property">wantsTurboStream</span>()) {
            <span class="hl-keyword">return</span> <span class="hl-property">turbo_stream</span>([
                <span class="hl-property">turbo_stream</span>(<span class="hl-variable">$chirp</span>, <span class="hl-value">'prepend'</span>),
                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">update</span>(<span class="hl-value">'create_chirp'</span>, <span class="hl-property">view</span>(<span class="hl-value">'chirps.partials.form'</span>)),
<span class="hl-deletion">                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">append</span>(<span class="hl-value">'notifications'</span>, <span class="hl-property">view</span>(<span class="hl-value">'layouts.partials.notice'</span>, [</span>
<span class="hl-deletion">                    <span class="hl-value">'message'</span> =&gt; <span class="hl-property">__</span>(<span class="hl-value">'Chirp created.'</span>),</span>
<span class="hl-deletion">                ])),</span>
<span class="hl-addition">                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">notice</span>(<span class="hl-property">__</span>(<span class="hl-value">'Chirp created.'</span>)),</span>
            ]);
        }

        <span class="hl-keyword">return</span> <span class="hl-property">redirect</span>()
            -&gt;<span class="hl-property">route</span>(<span class="hl-value">'chirps.index'</span>)
            -&gt;<span class="hl-property">with</span>(<span class="hl-value">'notice'</span>, <span class="hl-property">__</span>(<span class="hl-value">'Chirp created.'</span>));
    }

    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">update</span>(<span class="hl-injection"><span class="hl-type">Request</span> $request, <span class="hl-type">Chirp</span> $chirp</span>)
    {
        <span class="hl-variable">$this</span>-&gt;<span class="hl-property">authorize</span>(<span class="hl-value">'update'</span>, <span class="hl-variable">$chirp</span>);

        <span class="hl-variable">$validated</span> = <span class="hl-variable">$request</span>-&gt;<span class="hl-property">validate</span>([
            <span class="hl-value">'message'</span> =&gt; [<span class="hl-value">'required'</span>, <span class="hl-value">'string'</span>, <span class="hl-value">'max:255'</span>],
        ]);

        <span class="hl-variable">$chirp</span>-&gt;<span class="hl-property">update</span>(<span class="hl-variable">$validated</span>);

        <span class="hl-keyword">if</span> (<span class="hl-variable">$request</span>-&gt;<span class="hl-property">wantsTurboStream</span>()) {
            <span class="hl-keyword">return</span> <span class="hl-property">turbo_stream</span>([
                <span class="hl-property">turbo_stream</span>(<span class="hl-variable">$chirp</span>),
<span class="hl-deletion">                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">append</span>(<span class="hl-value">'notifications'</span>, <span class="hl-property">view</span>(<span class="hl-value">'layouts.partials.notice'</span>, [</span>
<span class="hl-deletion">                    <span class="hl-value">'message'</span> =&gt; <span class="hl-property">__</span>(<span class="hl-value">'Chirp updated.'</span>),</span>
<span class="hl-deletion">                ])),</span>
<span class="hl-addition">                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">notice</span>(<span class="hl-property">__</span>(<span class="hl-value">'Chirp updated.'</span>)),</span>
            ]);
        }

        <span class="hl-keyword">return</span> <span class="hl-property">redirect</span>()
            -&gt;<span class="hl-property">route</span>(<span class="hl-value">'chirps.index'</span>)
            -&gt;<span class="hl-property">with</span>(<span class="hl-value">'notice'</span>, <span class="hl-property">__</span>(<span class="hl-value">'Chirp updated.'</span>));
    }

    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">destroy</span>(<span class="hl-injection"><span class="hl-type">Chirp</span> $chirp</span>)
    {
        <span class="hl-variable">$this</span>-&gt;<span class="hl-property">authorize</span>(<span class="hl-value">'delete'</span>, <span class="hl-variable">$chirp</span>);

        <span class="hl-variable">$chirp</span>-&gt;<span class="hl-property">delete</span>();

        <span class="hl-keyword">if</span> (<span class="hl-property">request</span>()-&gt;<span class="hl-property">wantsTurboStream</span>()) {
            <span class="hl-keyword">return</span> <span class="hl-property">turbo_stream</span>([
                <span class="hl-property">turbo_stream</span>(<span class="hl-variable">$chirp</span>),
<span class="hl-deletion">                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">append</span>(<span class="hl-value">'notifications'</span>, <span class="hl-property">view</span>(<span class="hl-value">'layouts.partials.notice'</span>, [</span>
<span class="hl-deletion">                    <span class="hl-value">'message'</span> =&gt; <span class="hl-property">__</span>(<span class="hl-value">'Chirp deleted.'</span>),</span>
<span class="hl-deletion">                ])),</span>
<span class="hl-addition">                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">notice</span>(<span class="hl-property">__</span>(<span class="hl-value">'Chirp deleted.'</span>)),</span>
            ]);
        }

        <span class="hl-keyword">return</span> <span class="hl-property">redirect</span>()
            -&gt;<span class="hl-property">route</span>(<span class="hl-value">'chirps.index'</span>)
            -&gt;<span class="hl-property">with</span>(<span class="hl-value">'notice'</span>, <span class="hl-property">__</span>(<span class="hl-value">'Chirp deleted.'</span>));
    }
}
</code></pre>

<p>
</div>
</p>

<p>Although this is using Macros, we're still using the Turbo Stream actions that ship with Turbo by default. It's also possible to go custom and create your own actions, if you want to.</p>

<h2>Testing it out</h2>

<p>With these changes, our application behaves so much better than before! Try it out yourself!</p>

<p><img src="/assets/images/bootcamp/hotwiring-chirps-inline-forms.png" alt="Inline Editing Forms" /></p>
        </div>

                    <div class="mt-4 grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="relative space-y-1 p-4 rounded border border-zinc-900/10 shadow transition hover:bg-zinc-900/5">
      <div class="text-sm font-heading font-extrabold text-zinc-900/30 uppercase">Previous</div>
      <a class="font-heading font-extrabold text-zinc-900/80" href="/bootcamp/deleting-chirps">Deleting Chirps <span class="absolute inset-0"></span></a>
    </div>
  
      <div class="lg:col-start-2 relative space-y-1 p-4 rounded border border-zinc-900/10 shadow transition hover:bg-zinc-900/5">
      <div class="text-sm font-heading font-extrabold text-zinc-900/30 uppercase">Next</div>
      <a class="font-heading font-extrabold text-zinc-900/80" href="/bootcamp/broadcasting">Broadcasting <span class="absolute inset-0"></span></a>
    </div>
  </div>
              </main>
    </div>
  </div>

        <footer class="px-6 py-4 sm:px-20 sm:py-10 flex items-center space-x-2 justify-between">
          <p class="text-base text-center w-full">
            Turbo Laravel is maintained by <a href="https://tonysm.com" class="underline text-zinc-900/90">Tony Messias</a>. This is a <em>community project</em>, therefore not affiliated with Laravel nor Hotwire.
          </p>
        </footer>
    </body>
</html>
