<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="canonical" href="https://turbo-laravel.com/bootcamp/native-bridge-component">
        <meta name="description" content="Our First Bridge Component">
        <title>Our First Bridge Component | Bootcamp | Turbo Laravel</title>
        <link rel="apple-touch-icon" sizes="180x180" href="https://turbo-laravel.com/assets/manifest/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://turbo-laravel.com/assets/manifest/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://turbo-laravel.com/assets/manifest/favicon-16x16.png">
        <link rel="manifest" href="https://turbo-laravel.com/assets/site.webmanifest">
        <link rel="preload" href="https://turbo-laravel.com/assets/fonts/OpenSans-ExtraBold.ttf" as="font" type="font/ttf" crossorigin>
        <link rel="preload" href="https://turbo-laravel.com/assets/fonts/Jost-Regular.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preload" href="https://turbo-laravel.com/assets/fonts/Jost-Italic.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="stylesheet" href="/assets/build/css/main.css?id=b73df3e6e225b65ad7f03dff8377a5b6">
        <script defer src="/assets/build/js/main.js?id=b0f29cd4e71d41b4ee570d0f42344180"></script>

        <!-- Open Graph data -->
        <meta property="og:title" content="Our First Bridge Component | Bootcamp | Turbo Laravel" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="" />

        <meta property="og:image" content="https://turbo-laravel.com/assets/images/turbo-laravel-meta.png" />
        <meta property="og:image:height" content="630" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:description" content="Our First Bridge Component" />
        <meta property="og:locale" content="en_US">
        <meta property="og:site_name" content="Turbo Laravel" />

        <!-- Twitter Card meta -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="Our First Bridge Component | Bootcamp | Turbo Laravel">
        <meta name="twitter:description" content="Our First Bridge Component">
    </head>
    <body class="text-zinc-900 text-lg font-sans antialiased bg-zinc-700/5 min-h-screen" data-controller="search" data-action="keydown@window->search#focus">
        <header class="px-4 py-6 lg:px-10 xl:px-20 lg:py-10 flex items-center space-x-2 justify-between">
  <div class="relative flex-1 lg:flex-auto flex justify-between items-center space-x-4 sm:space-x-2">
    <h1 class="text-3xl sm:text-4xl font-extrabold font-heading">
      <a href="/">Turbo Laravel</a>
    </h1>

    <nav class="inline-block lg:hidden">
      <details class="group" data-search-target="nav">
        <summary class="list-none">
          <span>
            <span class="sr-only">Navigation</span>

            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-8 rotate-0 transition group-open:rotate-90">
              <path class="opacity-100 transition group-open:opacity-0" stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
              <path class="transition opacity-0 group-open:opacity-100" stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
            </svg>
          </span>
        </summary>

        <div class="bg-white/50 z-10 absolute top-12 -inset-x-4 backdrop-blur-xl">
          <div class="bg-zinc-700/5 px-4 py-6 backdrop-blur">
            <form action="/docs/search" method="GET" class="px-4">
  <label for="search" class="sr-only">Search</label>
  <input data-search-target="mobile" type="search" name="q" class="search-input rounded border border-zinc-900/5 px-4 py-2 text-base leading-3 shadow w-full" placeholder="Search 2.x docs..." />
  <button type="submit" class="sr-only">Search</button>
</form>

            <ul class="space-y-6 -mb-2 mt-4">
              <li>
                <a href="/docs" class="px-4 py-2 font-medium rounded-full transition hover:bg-white/90 flex items-center space-x-1">
                  <span>Documentation</span>
                </a>

                              </li>
              <li>
                <a href="https://github.com/hotwired-laravel/turbo-laravel" class="px-4 py-2 font-medium rounded-full transition hover:bg-zinc-900/20">Source Code</a>
              </li>
              <li class="space-y-6">
                <a href="/bootcamp/introduction" class="px-4 py-2 font-medium rounded-full transition hover:bg-white/90">Bootcamp</a>
                  <div class="mx-4 pl-3 border-l-4 border-zinc-900/30">
  <ul class="">
        <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Prologue</li>
    <li class="children mt-2">
      <ul class="list-inside space-y-1 text-lg">
                <li><a href="/bootcamp/introduction" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Introduction</a></li>
              </ul>
    </li>
        <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Web</li>
    <li class="children mt-2">
      <ul class="list-inside space-y-1 text-lg">
                <li><a href="/bootcamp/installation" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Installation</a></li>
                <li><a href="/bootcamp/creating-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Creating Chirps</a></li>
                <li><a href="/bootcamp/listing-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Listing Chirps</a></li>
                <li><a href="/bootcamp/editing-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Editing Chirps</a></li>
                <li><a href="/bootcamp/deleting-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Deleting Chirps</a></li>
                <li><a href="/bootcamp/hotwiring-everything" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Hotwiring Everything</a></li>
                <li><a href="/bootcamp/broadcasting" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Broadcasting</a></li>
              </ul>
    </li>
        <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Native</li>
    <li class="children mt-2">
      <ul class="list-inside space-y-1 text-lg">
                <li><a href="/bootcamp/native-setup" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Installation</a></li>
                <li><a href="/bootcamp/native-auth" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Authentication</a></li>
                <li><a href="/bootcamp/native-bridge-component" class="font-bold transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Our First Bridge Component</a></li>
                <li><a href="/bootcamp/native-editing-modal" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Editing as a Modal</a></li>
                <li><a href="/bootcamp/native-confirmation" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Native Confirmation Dialog</a></li>
                <li><a href="/bootcamp/native-toasts" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Native Toasts</a></li>
              </ul>
    </li>
        <li class="px-2 py-1 font-heading font-extrabold uppercase text-sm text-zinc-900/40">Epilogue</li>
    <li class="children mt-2">
      <ul class="list-inside space-y-1 text-lg">
                <li><a href="/bootcamp/conclusion" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1">Conclusion</a></li>
              </ul>
    </li>
      </ul>
</div>
              </li>
              <!-- <li><a href="/demo" class="px-4 py-2 font-medium rounded-full transition hover:bg-white/90">Demo</a></li> -->
            </ul>
          </div>
        </div>
      </details>
    </nav>
  </div>

  <nav class="hidden lg:block">
    <ul class="flex items-center space-x-6 -my-2">
      <li>
        <div class="group relative py-2">
          <a href="/docs" class=" px-4 py-2 font-medium rounded-full transition hover:bg-white/90 flex items-center space-x-1">
            <span>Documentation</span>

            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
            </svg>
          </a>

          <div class="absolute p-4 top-14 inset-x opacity-0 scale-0 -translate-y-8 transition group-hover:translate-y-0 group-hover:scale-100 group-hover:opacity-100 rounded bg-white shadow z-10">
            <ul class="space-y-1">
              <li><a href="/docs/installation" class="block px-2 py-1 bg-zinc-900/20 rounded">Version <span class="">2.2.0</span></a></li>
              <li><a href="/1.x/docs/installation" class="block px-2 py-1  rounded">Version <span class="">1.12.2</span></a></li>
            </ul>
          </div>
        </div>
      </li>
      <li><a href="https://github.com/hotwired-laravel/turbo-laravel" class="px-4 py-2 font-medium rounded-full transition hover:bg-white/90">Source Code</a></li>
      <li><a href="/bootcamp/introduction" class="bg-white/90 px-4 py-2 font-medium rounded-full transition hover:bg-white/90">Bootcamp</a></li>
      <!-- <li><a href="/demo" class=" px-4 py-2 font-medium rounded-full transition hover:bg-white/90">Demo</a></li> -->
    </ul>
  </nav>
</header>

          <div class="bg-white/90 custom-border px-6 py-20 sm:flex space-x-6">
    <div class="sm:flex sm:space-x-12 sm:max-w-7xl w-full mx-auto">
      <aside class="relative w-1/4 hidden lg:block" data-search-target="aside">
        <div class="sticky top-4 block space-y-4">
            <form action="/bootcamp/search" method="GET">
  <label for="search" class="sr-only">Search</label>
  <input data-search-target="web" type="text" name="q" placeholder="Search bootcamp... (press &quot;/&quot; to focus)" class="search-input rounded border border-zinc-900/5 px-4 py-2 text-base leading-3 shadow w-full" />
</form>

            <ul class="[&_.children]:mb-4 text-base">
    <li class="px-2 py-1 font-heading font-extrabold uppercase text-zinc-900/40">Prologue</li>
  <li class="children mt-2">
    <ul class="list-inside space-y-1">
            <li><a href="/bootcamp/introduction" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Introduction</a></li>
          </ul>
  </li>
    <li class="px-2 py-1 font-heading font-extrabold uppercase text-zinc-900/40">Web</li>
  <li class="children mt-2">
    <ul class="list-inside space-y-1">
            <li><a href="/bootcamp/installation" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Installation</a></li>
            <li><a href="/bootcamp/creating-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Creating Chirps</a></li>
            <li><a href="/bootcamp/listing-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Listing Chirps</a></li>
            <li><a href="/bootcamp/editing-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Editing Chirps</a></li>
            <li><a href="/bootcamp/deleting-chirps" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Deleting Chirps</a></li>
            <li><a href="/bootcamp/hotwiring-everything" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Hotwiring Everything</a></li>
            <li><a href="/bootcamp/broadcasting" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Broadcasting</a></li>
          </ul>
  </li>
    <li class="px-2 py-1 font-heading font-extrabold uppercase text-zinc-900/40">Native</li>
  <li class="children mt-2">
    <ul class="list-inside space-y-1">
            <li><a href="/bootcamp/native-setup" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Installation</a></li>
            <li><a href="/bootcamp/native-auth" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Authentication</a></li>
            <li><a href="/bootcamp/native-bridge-component" class="bg-zinc-900/20 transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Our First Bridge Component</a></li>
            <li><a href="/bootcamp/native-editing-modal" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Editing as a Modal</a></li>
            <li><a href="/bootcamp/native-confirmation" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Native Confirmation Dialog</a></li>
            <li><a href="/bootcamp/native-toasts" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Native Toasts</a></li>
          </ul>
  </li>
    <li class="px-2 py-1 font-heading font-extrabold uppercase text-zinc-900/40">Epilogue</li>
  <li class="children mt-2">
    <ul class="list-inside space-y-1">
            <li><a href="/bootcamp/conclusion" class=" transition hover:bg-zinc-900/20 w-full inline-block px-2 py-1 rounded">Conclusion</a></li>
          </ul>
  </li>
  </ul>
        </div>
      </aside>

      <main class="flex-1 min-w-0 max-w-3xl">
        <div class="prose prose-lg overflow-hidden prose-zinc [&_code:not(pre_code)]:text-wrap [&_code:not(pre_code)]:break-words prose-headings:font-heading prose-headings:font-extrabold max-w-none w-full">
            <h1><em>10.</em> Our First Bridge Component</h1>

<p>Rendering the create chirps form inline right on the homepage isn't the best UX for mobile. Instead, it would be better to display the form as a native modal screen. Let's implement that, but first, let's hide the entire create chirps form on Hotwire Native.</p>

<h2>Hiding the Elements for Hotwire Native only</h2>

<p>We could technically prevent the entire section from even rendering on requests made by Hotwire Native clients using the <code>@unlessturbonative</code> Blade directives, something like this:</p>

<pre><code class="language-blade">&lt;<span class="hl-keyword">x-app-layout</span>&gt;
    &lt;<span class="hl-keyword">x-slot</span> <span class="hl-property">name</span>=&quot;header&quot;&gt;
        &lt;<span class="hl-keyword">h2</span> <span class="hl-property">class</span>=&quot;font-semibold text-xl text-gray-800 leading-tight&quot;&gt;
            {{ <span class="hl-property">__</span>(<span class="hl-value">'Chirps'</span>) }}
        &lt;/<span class="hl-keyword">h2</span>&gt;
    &lt;/<span class="hl-keyword">x-slot</span>&gt;

    &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-2xl mx-auto p-4 sm:p-6 lg:p-8&quot;&gt;
        <span class="hl-comment">&lt;!-- Add this: --&gt;</span>
        <span class="hl-keyword">@unlessturbonative</span>
        &lt;<span class="hl-keyword">x-turbo::frame</span> <span class="hl-property">id</span>=&quot;create_chirp&quot; <span class="hl-property">src</span>=&quot;{{ <span class="hl-property">route</span>(<span class="hl-value">'chirps.create'</span>) }}&quot;&gt;
            &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;relative flex items-center justify-center py-10 px-4 rounded-lg border border-dotted border-gray-300&quot;&gt;
                &lt;<span class="hl-keyword">a</span> <span class="hl-property">class</span>=&quot;text-gray-700&quot; <span class="hl-property">href</span>=&quot;{{ <span class="hl-property">route</span>(<span class="hl-value">'chirps.create'</span>) }}&quot;&gt;
                    Add a new Chirp
                    &lt;<span class="hl-keyword">span</span> <span class="hl-property">class</span>=&quot;absolute inset-0&quot;&gt;&lt;/<span class="hl-keyword">span</span>&gt;
                &lt;/<span class="hl-keyword">a</span>&gt;
            &lt;/<span class="hl-keyword">div</span>&gt;
        &lt;/<span class="hl-keyword">x-turbo::frame</span>&gt;
        <span class="hl-keyword">@endunlessturbonative</span>

        &lt;<span class="hl-keyword">div</span> <span class="hl-property">id</span>=&quot;chirps&quot; <span class="hl-property">class</span>=&quot;mt-6 bg-white shadow-sm rounded-lg divide-y&quot;&gt;
            <span class="hl-keyword">@each</span>(<span class="hl-value">'chirps._chirp'</span>, <span class="hl-variable">$chirps</span>, <span class="hl-value">'chirp'</span>)
        &lt;/<span class="hl-keyword">div</span>&gt;
    &lt;/<span class="hl-keyword">div</span>&gt;
&lt;/<span class="hl-keyword">x-app-layout</span>&gt;
</code></pre>

<p>This would work, but that makes this page harder to cache. Not a problem now, but I prefer doing things like that on the client-side with CSS and a bit of JS.</p>

<p>Since we have configured our WebView to use a custom <code>User-Agent</code> header, we can actually detect when our webapp is running inside a Hotwire Native client by checking that. Let's first add a helper to check the platform by creating a <code>resources/js/helpers/platform.js</code> file with the following contents:</p>

<pre><code class="language-js"><span class="hl-keyword">const</span> { userAgent } = window.<span class="hl-property">navigator</span>;

<span class="hl-keyword">export</span> <span class="hl-keyword">const</span> isIos = /iPhone|iPad/.<span class="hl-property">test</span>(userAgent)
<span class="hl-keyword">export</span> <span class="hl-keyword">const</span> isAndroid = /Android/.<span class="hl-property">test</span>(userAgent)
<span class="hl-keyword">export</span> <span class="hl-keyword">const</span> isMobile = isIos || isAndroid

<span class="hl-keyword">export</span> <span class="hl-keyword">const</span> isIosApp = /Hotwire Native iOS/.<span class="hl-property">test</span>(userAgent)
<span class="hl-keyword">export</span> <span class="hl-keyword">const</span> isAndroidApp = /Hotwire Native Android/.<span class="hl-property">test</span>(userAgent)
<span class="hl-keyword">export</span> <span class="hl-keyword">const</span> isMobileApp = isIosApp || isAndroidApp
</code></pre>

<p>Now, let's update our <code>resources/js/app.js</code> file to add a <code>turbo-native</code> class to out HTML document:</p>

<pre><code class="language-js"><span class="hl-keyword">import</span> <span class="hl-value">'./bootstrap'</span>;
<span class="hl-keyword">import</span> <span class="hl-value">'./elements/turbo-echo-stream-tag'</span>;
<span class="hl-keyword">import</span> <span class="hl-value">'./libs'</span>;
<span class="hl-keyword">import</span> <span class="hl-value">'@github/time-elements'</span>;

<span class="hl-comment">// Add this:</span>
<span class="hl-keyword">import</span> { isMobileApp } <span class="hl-keyword">from</span> <span class="hl-value">'./helpers/platform'</span>;

<span class="hl-keyword">if</span> (isMobileApp) {
    document.<span class="hl-property">documentElement</span>.<span class="hl-property">classList</span>.<span class="hl-property">add</span>(<span class="hl-value">'turbo-native'</span>);
}
</code></pre>

<p>This will ensure that when our web app runs inside a Hotwire Native client, a <code>.turbo-native</code> class will be added to the <code>&lt;html&gt;</code> element in our page, but we're not doing anything yet with it. Let's create a custom Tailwind CSS modifier that will allow us to make things behave differently when the <code>.turbo-native</code> class is present in the document.</p>

<p>To do that, open the <code>tailwind.config.js</code> file in the root of your Laravel app and make the following changes:</p>

<pre><code class="language-js"><span class="hl-keyword">const</span> defaultTheme = <span class="hl-property">require</span>(<span class="hl-value">'tailwindcss/defaultTheme'</span>);
<span class="hl-keyword">const</span> plugin = <span class="hl-property">require</span>(<span class="hl-value">'tailwindcss/plugin'</span>); <span class="hl-comment">// Add this</span>

<span class="hl-comment">/** <span class="hl-value">@type</span> <span class="hl-type">{import('tailwindcss').Config}</span> */</span>
module.<span class="hl-property">exports</span> = {
    <span class="hl-comment">// ...</span>

    <span class="hl-property">plugins</span>: [
        <span class="hl-property">require</span>(<span class="hl-value">&quot;@tailwindcss/forms&quot;</span>),
        <span class="hl-comment">// Add this:</span>
        <span class="hl-property">plugin</span>(<span class="hl-keyword">function</span> ({ addVariant }) {
            <span class="hl-keyword">return</span> <span class="hl-property">addVariant</span>(<span class="hl-value">'turbo-native'</span>, [<span class="hl-value">'&amp;.turbo-native'</span>, <span class="hl-value">'.turbo-native &amp;'</span>]);
        }),
    ],
};
</code></pre>

<p>With that, we can use the new modifier like any other default modifier in Tailwind. Let's use it to hide the create chirps form on the index page for Hotwire Native clients. Open the <code>resources/views/chirps/index.blade.php</code> and make the following changes:</p>

<pre><code class="language-blade">&lt;<span class="hl-keyword">x-app-layout</span>&gt;
    <span class="hl-comment">&lt;!-- ... --&gt;</span>

    &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-2xl mx-auto p-4 sm:p-6 lg:p-8&quot;&gt;
        <span class="hl-comment">&lt;!-- Update the Turbo Frame: --&gt;</span>
        &lt;<span class="hl-keyword">x-turbo::frame</span> <span class="hl-property">id</span>=&quot;create_chirp&quot; <span class="hl-property">src</span>=&quot;{{ <span class="hl-property">route</span>(<span class="hl-value">'chirps.create'</span>) }}&quot; <span class="hl-property">class</span>=&quot;turbo-native:hidden&quot; <span class="hl-property">loading</span>=&quot;lazy&quot;&gt;
            &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;relative flex items-center justify-center py-10 px-4 rounded-lg border border-dotted border-gray-300&quot;&gt;
                &lt;<span class="hl-keyword">a</span> <span class="hl-property">class</span>=&quot;text-gray-700&quot; <span class="hl-property">href</span>=&quot;{{ <span class="hl-property">route</span>(<span class="hl-value">'chirps.create'</span>) }}&quot;&gt;
                    Add a new Chirp
                    &lt;<span class="hl-keyword">span</span> <span class="hl-property">class</span>=&quot;absolute inset-0&quot;&gt;&lt;/<span class="hl-keyword">span</span>&gt;
                &lt;/<span class="hl-keyword">a</span>&gt;
            &lt;/<span class="hl-keyword">div</span>&gt;
        &lt;/<span class="hl-keyword">x-turbo::frame</span>&gt;

        &lt;<span class="hl-keyword">div</span> <span class="hl-property">id</span>=&quot;chirps&quot; <span class="hl-property">class</span>=&quot;mt-6 bg-white shadow-sm rounded-lg divide-y&quot;&gt;
            <span class="hl-keyword">@each</span>(<span class="hl-value">'chirps._chirp'</span>, <span class="hl-variable">$chirps</span>, <span class="hl-value">'chirp'</span>)
        &lt;/<span class="hl-keyword">div</span>&gt;
    &lt;/<span class="hl-keyword">div</span>&gt;
&lt;/<span class="hl-keyword">x-app-layout</span>&gt;
</code></pre>

<p><img src="/assets/images/bootcamp/native/fab-chirps-hide-form.png" alt="Hiding the Create Chirps form" /></p>

<p>Let's also tweak our index page a bit to remove some padding and unnecessary margins:</p>

<pre><code class="language-blade">&lt;<span class="hl-keyword">x-app-layout</span>&gt;
    <span class="hl-comment">&lt;!-- ... --&gt;</span>

    <span class="hl-comment">&lt;!-- Update this element: --&gt;</span>
    &lt;<span class="hl-keyword">div</span> <span class="hl-property">class</span>=&quot;max-w-2xl mx-auto p-4 sm:p-6 lg:p-8 turbo-native:p-0&quot;&gt;
        &lt;<span class="hl-keyword">x-turbo::frame</span> <span class="hl-property">id</span>=&quot;create_chirp&quot; <span class="hl-property">src</span>=&quot;{{ <span class="hl-property">route</span>(<span class="hl-value">'chirps.create'</span>) }}&quot; <span class="hl-property">class</span>=&quot;turbo-native:hidden&quot; <span class="hl-property">loading</span>=&quot;lazy&quot;&gt;
            <span class="hl-comment">&lt;!-- ... --&gt;</span>
        &lt;/<span class="hl-keyword">x-turbo::frame</span>&gt;

        <span class="hl-comment">&lt;!-- Update this element: --&gt;</span>
        &lt;<span class="hl-keyword">div</span> <span class="hl-property">id</span>=&quot;chirps&quot; <span class="hl-property">class</span>=&quot;mt-6 bg-white shadow-sm rounded-lg divide-y turbo-native:mt-0&quot;&gt;
            <span class="hl-keyword">@each</span>(<span class="hl-value">'chirps._chirp'</span>, <span class="hl-variable">$chirps</span>, <span class="hl-value">'chirp'</span>)
        &lt;/<span class="hl-keyword">div</span>&gt;
    &lt;/<span class="hl-keyword">div</span>&gt;
&lt;/<span class="hl-keyword">x-app-layout</span>&gt;
</code></pre>

<p>Let's also hide the web nav bar for Hotwire Native users, our navigation should be fully native on the mobile clients anyways. To do that, change the <code>resources/views/layouts/navigation.blade.php</code> file:</p>

<pre><code class="language-blade"><span class="hl-comment">&lt;!-- Update the root nav element: --&gt;</span>
&lt;<span class="hl-keyword">nav</span> <span class="hl-property">x-data</span>=&quot;{ open: false }&quot; <span class="hl-property">class</span>=&quot;bg-white border-b border-gray-100 turbo-native:hidden&quot;&gt;
    <span class="hl-comment">&lt;!-- ... --&gt;</span>
&lt;/<span class="hl-keyword">nav</span>&gt;
</code></pre>

<p>Let's also hide the header section in the <code>resources/views/layouts/app.blade.php</code> layout file:</p>

<pre><code class="language-blade"><span class="hl-comment">&lt;!-- Update the Header element: --&gt;</span>
&lt;<span class="hl-keyword">header</span> <span class="hl-property">class</span>=&quot;bg-white shadow turbo-native:hidden&quot;&gt;
    <span class="hl-comment">&lt;!-- ... --&gt;</span>
&lt;/<span class="hl-keyword">header</span>&gt;
</code></pre>

<p>And our page should look like this:</p>

<p><img src="/assets/images/bootcamp/native/fab-ui-tweaks.png" alt="Hotwire Native UI Tweaks" /></p>

<h2>Adding the Floating Action Button</h2>

<p>Now that the create chirps form is hidden, we need to allow our users to somehow navigate to the create chirps form. Let's create our custom <code>ChirpsHomeFragment</code> that will be specific to the <code>chirps.index</code> route.</p>

<p>Create a new Kotlin class inside the <code>features.web</code> package and call it <code>ChirpsHomeFragment</code>:</p>

<pre><code class="language-kotlin">package com.example.turbochirpernative.features.web

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import com.example.turbochirpernative.R
import dev.hotwire.turbo.nav.TurboNavGraphDestination

@TurboNavGraphDestination(uri = &quot;turbo://fragment/chirps/index&quot;)
class ChirpsHomeFragment: WebFragment() {
    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
        return inflater.inflate(R.layout.fragment_chirps_home, container, false)
    }
}
</code></pre>

<p>Notice that we're extending the <code>WebFragment</code> class so we need to make it open:</p>

<pre><code class="language-kotlin">package com.example.turbochirpernative.features.web

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import com.example.turbochirpernative.R
import dev.hotwire.turbo.fragments.TurboWebFragment
import dev.hotwire.turbo.nav.TurboNavGraphDestination

@TurboNavGraphDestination(uri = &quot;turbo://fragment/web&quot;)
open class WebFragment: TurboWebFragment() {

    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
        return inflater.inflate(R.layout.fragment_web, container, false)
    }

    override fun onVisitCompleted(location: String, completedOffline: Boolean) {
        super.onVisitCompleted(location, completedOffline)

        val script = &quot;window.NativeBridge.start();&quot;
        session.webView.evaluateJavascript(script, null)
    }
}
</code></pre>

<p>Also, we're rendering a different layout file, so we need to create it. Add a new layout file by right-clicking on the <code>res/layout</code> folder and choosing the "New -> Layout Resource File" option in the menu, add the following contents to it:</p>

<pre><code class="language-xml">&lt;?xml <span class="hl-property">version</span>=&quot;1.0&quot; <span class="hl-property">encoding</span>=&quot;utf-8&quot;?&gt;
&lt;<span class="hl-keyword">androidx</span>.constraintlayout.widget.ConstraintLayout
    xmlns:<span class="hl-property">android</span>=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:<span class="hl-property">app</span>=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:<span class="hl-property">tools</span>=&quot;http://schemas.android.com/tools&quot;
    android:<span class="hl-property">layout_width</span>=&quot;match_parent&quot;
    android:<span class="hl-property">layout_height</span>=&quot;match_parent&quot;&gt;

    &lt;<span class="hl-keyword">com</span>.google.android.material.appbar.AppBarLayout
        android:<span class="hl-property">id</span>=&quot;@+id/app_bar&quot;
        android:<span class="hl-property">layout_width</span>=&quot;match_parent&quot;
        android:<span class="hl-property">layout_height</span>=&quot;wrap_content&quot;
        android:<span class="hl-property">background</span>=&quot;?colorPrimary&quot;
        app:<span class="hl-property">layout_constraintEnd_toEndOf</span>=&quot;parent&quot;
        app:<span class="hl-property">layout_constraintStart_toStartOf</span>=&quot;parent&quot;
        app:<span class="hl-property">layout_constraintTop_toTopOf</span>=&quot;parent&quot;&gt;

        &lt;<span class="hl-keyword">com</span>.google.android.material.appbar.MaterialToolbar
            android:<span class="hl-property">id</span>=&quot;@+id/toolbar&quot;
            android:<span class="hl-property">layout_width</span>=&quot;match_parent&quot;
            app:<span class="hl-property">titleTextColor</span>=&quot;?colorOnPrimary&quot;
            android:<span class="hl-property">layout_height</span>=&quot;wrap_content&quot; /&gt;

    &lt;/<span class="hl-keyword">com</span>.google.android.material.appbar.AppBarLayout&gt;

    &lt;<span class="hl-keyword">include</span>
        <span class="hl-property">layout</span>=&quot;@layout/turbo_view&quot;
        android:<span class="hl-property">layout_width</span>=&quot;match_parent&quot;
        android:<span class="hl-property">layout_height</span>=&quot;0dp&quot;
        app:<span class="hl-property">layout_constraintBottom_toBottomOf</span>=&quot;parent&quot;
        app:<span class="hl-property">layout_constraintTop_toBottomOf</span>=&quot;@+id/app_bar&quot; /&gt;

    &lt;<span class="hl-keyword">com</span>.google.android.material.floatingactionbutton.FloatingActionButton
        android:<span class="hl-property">id</span>=&quot;@+id/floatingActionButton&quot;
        android:<span class="hl-property">layout_width</span>=&quot;wrap_content&quot;
        android:<span class="hl-property">layout_height</span>=&quot;wrap_content&quot;
        android:<span class="hl-property">layout_margin</span>=&quot;16dp&quot;
        android:<span class="hl-property">clickable</span>=&quot;true&quot;
        android:<span class="hl-property">focusable</span>=&quot;true&quot;
        android:<span class="hl-property">tint</span>=&quot;@color/white&quot;
        app:<span class="hl-property">tint</span>=&quot;@color/white&quot;
        app:<span class="hl-property">backgroundTint</span>=&quot;@color/indigo_500&quot;
        app:<span class="hl-property">layout_constraintBottom_toBottomOf</span>=&quot;parent&quot;
        app:<span class="hl-property">layout_constraintEnd_toEndOf</span>=&quot;parent&quot;
        app:<span class="hl-property">srcCompat</span>=&quot;@android:drawable/ic_input_add&quot;
        android:<span class="hl-property">contentDescription</span>=&quot;New Chirp&quot;
    /&gt;

&lt;/<span class="hl-keyword">androidx</span>.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>

<p>Now, let's register our new fragment in the <code>MainSessionNavHostFragment</code>:</p>

<pre><code class="language-kotlin"><br />// ...

class MainSessionNavHostFragment : TurboSessionNavHostFragment() {
    override val registeredFragments: List&lt;KClass&lt;out Fragment&gt;&gt;
        get() = listOf(
            WebFragment::class,
            LoginFragment::class,
            ChirpsHomeFragment::class, // Add this
        )

    // ...
}
</code></pre>

<p>Now, let's configure our route path in the <code>assets/json/configuration.json</code> file to open that fragment whenever we visit the <code>chirps.index</code> route:</p>

<pre><code class="language-json"><span class="hl-property">{</span>
  <span class="hl-keyword">&quot;settings&quot;</span>: <span class="hl-property">{</span>
    <span class="hl-keyword">&quot;screenshots_enabled&quot;</span>: true
  <span class="hl-property">}</span>,
  <span class="hl-keyword">&quot;rules&quot;</span>: <span class="hl-property">[</span>
    <span class="hl-property">{</span>
      <span class="hl-keyword">&quot;patterns&quot;</span>: <span class="hl-property">[</span>
        <span class="hl-value">&quot;.*&quot;</span>
      <span class="hl-property">]</span>,
      <span class="hl-keyword">&quot;properties&quot;</span>: <span class="hl-property">{</span>
        <span class="hl-keyword">&quot;context&quot;</span>: <span class="hl-value">&quot;default&quot;</span>,
        <span class="hl-keyword">&quot;uri&quot;</span>: <span class="hl-value">&quot;turbo://fragment/web&quot;</span>,
        <span class="hl-keyword">&quot;pull_to_refresh_enabled&quot;</span>: true
      <span class="hl-property">}</span>
    <span class="hl-property">}</span>,
    <span class="hl-property">{</span>
      <span class="hl-keyword">&quot;patterns&quot;</span>: <span class="hl-property">[</span>
        <span class="hl-value">&quot;login$&quot;</span>,
        <span class="hl-value">&quot;login/$&quot;</span>
      <span class="hl-property">]</span>,
      <span class="hl-keyword">&quot;properties&quot;</span>: <span class="hl-property">{</span>
        <span class="hl-keyword">&quot;context&quot;</span>: <span class="hl-value">&quot;default&quot;</span>,
        <span class="hl-keyword">&quot;uri&quot;</span>: <span class="hl-value">&quot;turbo://fragment/auth/login&quot;</span>,
        <span class="hl-keyword">&quot;pull_to_refresh_enabled&quot;</span>: false
      <span class="hl-property">}</span>
    <span class="hl-property">}</span>,
    <span class="hl-property">{</span>
      <span class="hl-keyword">&quot;patterns&quot;</span>: <span class="hl-property">[</span>
        <span class="hl-value">&quot;chirps$&quot;</span>,
        <span class="hl-value">&quot;chirps/$&quot;</span>
      <span class="hl-property">]</span>,
      <span class="hl-keyword">&quot;properties&quot;</span>: <span class="hl-property">{</span>
        <span class="hl-keyword">&quot;context&quot;</span>: <span class="hl-value">&quot;default&quot;</span>,
        <span class="hl-keyword">&quot;uri&quot;</span>: <span class="hl-value">&quot;turbo://fragment/chirps/index&quot;</span>,
        <span class="hl-keyword">&quot;pull_to_refresh_enabled&quot;</span>: true
      <span class="hl-property">}</span>
    <span class="hl-property">}</span>
  <span class="hl-property">]</span>
<span class="hl-property">}</span>
</code></pre>

<p>Notice that the URI matches what we defined in the <code>ChirpsHomeFragment</code>: <code>turbo://fragment/chirps/index</code>.</p>

<p>At this point, our app looks like this:</p>

<p><img src="/assets/images/bootcamp/native/fab-showing-up.png" alt="With The FAB" /></p>

<p>But our button doesn't work yet. Let's tell Hotwire Native to make a visit to the <code>chirps/create</code> route. First, add the new constant to the <code>util.Constants</code> file:</p>

<pre><code class="language-kotlin">package com.example.turbochirpernative.util

const val BASE_URL = &quot;http://10.0.2.2&quot;
const val CHIRPS_HOME_URL = &quot;$BASE_URL/chirps&quot;
const val CHIRPS_CREATE_URL = &quot;$CHIRPS_HOME_URL/create&quot; // Add this

const val API_BASE_URL = &quot;$BASE_URL/api&quot;
const val API_CSRF_COOKIES_URL = &quot;$BASE_URL/sanctum/csrf-cookie&quot;
const val API_LOGIN_URL = &quot;$API_BASE_URL/login&quot;
</code></pre>

<p>Now, change the <code>ChirpsHomeFragment</code> to setup the click handler on that fab:</p>

<pre><code class="language-kotlin">@TurboNavGraphDestination(uri = &quot;turbo://fragment/chirps/index&quot;)
class ChirpsHomeFragment: WebFragment() {
    // ...

    // Add this:
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        setupFab()
    }

    // Add this:
    private fun setupFab() {
        view?.findViewById&lt;FloatingActionButton&gt;(R.id.createChirpsFab)?.setOnClickListener {
            navigate(CHIRPS_CREATE_URL)
        }
    }
}
</code></pre>

<p>Now, let's click on it and you should be redirected to the create chirps form! How cool is that?!</p>

<p><img src="/assets/images/bootcamp/native/fab-create-chirps-form-in-new-page.png" alt="Create Chirps Form" /></p>

<p>If you try creating a chirp, however, you should see some interesting behavior...</p>

<p><img src="/assets/images/bootcamp/native/fab-wrong-behavior-after-creating.png" alt="Wrong behavior after creating chirps" /></p>

<p>That's not good. That's because we're returning Turbo Streams on the <code>ChirpController@store</code> action. Let's change it so it doesn't do that when the request was done via a Hotwire Native client. We want the redirect there. Head to the <code>app/Http/Controllers/ChirpController.php</code> file and change the <code>store</code> action like so:</p>

<pre><code class="language-php"><span class="hl-keyword">&lt;?php</span>

<span class="hl-keyword">namespace</span> <span class="hl-type">App\Http\Controllers</span>;

<span class="hl-keyword">use</span> <span class="hl-type">App\Models\Chirp</span>;
<span class="hl-keyword">use</span> <span class="hl-type">Illuminate\Http\Request</span>;

<span class="hl-keyword">class</span> <span class="hl-type">ChirpController</span> <span class="hl-keyword">extends</span> <span class="hl-type">Controller</span>
{
    <span class="hl-comment">// ...</span>

    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">store</span>(<span class="hl-injection"><span class="hl-type">Request</span> $request</span>)
    {
        <span class="hl-variable">$validated</span> = <span class="hl-variable">$request</span>-&gt;<span class="hl-property">validate</span>([
            <span class="hl-value">'message'</span> =&gt; [<span class="hl-value">'required'</span>, <span class="hl-value">'string'</span>, <span class="hl-value">'max:255'</span>],
        ]);

        <span class="hl-variable">$chirp</span> = <span class="hl-variable">$request</span>-&gt;<span class="hl-property">user</span>()-&gt;<span class="hl-property">chirps</span>()-&gt;<span class="hl-property">create</span>(<span class="hl-variable">$validated</span>);

        <span class="hl-comment">// Check if the request came from a Hotwire Native client...</span>
        <span class="hl-keyword">if</span> (<span class="hl-variable">$request</span>-&gt;<span class="hl-property">wantsTurboStream</span>() <span class="hl-operator">&amp;&amp;</span> ! <span class="hl-variable">$request</span>-&gt;<span class="hl-property">wasFromHotwireNative</span>()) {
            <span class="hl-keyword">return</span> <span class="hl-property">turbo_stream</span>([
                <span class="hl-property">turbo_stream</span>(<span class="hl-variable">$chirp</span>, <span class="hl-value">'prepend'</span>),
                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">update</span>(<span class="hl-value">'create_chirp'</span>, <span class="hl-property">view</span>(<span class="hl-value">'chirps._form'</span>)),
                <span class="hl-property">turbo_stream</span>()-&gt;<span class="hl-property">append</span>(<span class="hl-value">'notifications'</span>, <span class="hl-property">view</span>(<span class="hl-value">'layouts.notification'</span>, [
                    <span class="hl-value">'message'</span> =&gt; <span class="hl-property">__</span>(<span class="hl-value">'Chirp created.'</span>),
                ]))
            ]);
        }

        <span class="hl-keyword">return</span> <span class="hl-property">redirect</span>()
            -&gt;<span class="hl-property">route</span>(<span class="hl-value">'chirps.index'</span>)
            -&gt;<span class="hl-property">with</span>(<span class="hl-value">'status'</span>, <span class="hl-property">__</span>(<span class="hl-value">'Chirp created.'</span>));
    }

    <span class="hl-comment">// ...</span>
}
</code></pre>

<p>This should redirect us to the home page after creating a chirp and the new Chirp should appear there! Cool.</p>

<p>We have lost the flash message, but we'll handle that soon. One thing is bothering me: we're showing the "Turbo Chirper Native" title on every screen. I don't like that. Instead, I want each screen to customize the title. Well, it turns out it already does that based on the title of the page we're visiting. Let's change our <code>app.blade.php</code> layout file to accept a <code>$title</code> prop:</p>

<pre><code class="language-blade">&lt;<span class="hl-keyword">title</span>&gt;{{ <span class="hl-variable">$title</span> ?? <span class="hl-property">config</span>(<span class="hl-value">'app.name'</span>, <span class="hl-value">'Laravel'</span>) }}&lt;/<span class="hl-keyword">title</span>&gt;
</code></pre>

<p>Now, let's register the prop in the <code>AppLayout</code> component in <code>app/View/Components</code>:</p>

<pre><code class="language-php"><span class="hl-keyword">&lt;?php</span>

<span class="hl-keyword">namespace</span> <span class="hl-type">App\View\Components</span>;

<span class="hl-keyword">use</span> <span class="hl-type">Illuminate\View\Component</span>;

<span class="hl-keyword">class</span> <span class="hl-type">AppLayout</span> <span class="hl-keyword">extends</span> <span class="hl-type">Component</span>
{
    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">__construct</span>(<span class="hl-injection"><span class="hl-keyword">public</span> <span class="hl-type">?string</span> <span class="hl-property">$title</span> = <span class="hl-keyword">null</span></span>)
    {
    }

    <span class="hl-keyword">public</span> <span class="hl-keyword">function</span> <span class="hl-property">render</span>()
    {
        <span class="hl-keyword">return</span> <span class="hl-property">view</span>(<span class="hl-value">'layouts.app'</span>);
    }
}
</code></pre>

<p>Then, in the <code>resources/views/chirps/create.blade.php</code> file, set the <code>:title</code> prop in the <code>&lt;x-app-layout&gt;</code> component:</p>

<pre><code class="language-blade"><span class="hl-comment">&lt;!-- Add the title prop: --&gt;</span>
&lt;<span class="hl-keyword">x-app-layout</span> :<span class="hl-property">title</span>=&quot;__('Create Chirp')&quot;&gt;
    <span class="hl-comment">&lt;!-- ... --&gt;</span>
&lt;/<span class="hl-keyword">x-app-layout</span>&gt;
</code></pre>

<p>And with that, our create chirps page should have the "Create Chirp" title:</p>

<p><img src="/assets/images/bootcamp/native/fab-create-chirps-with-title.png" alt="Create Chirp Screen with Title" /></p>
        </div>

                    <div class="mt-4 grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="relative space-y-1 p-4 rounded border border-zinc-900/10 shadow transition hover:bg-zinc-900/5">
      <div class="text-sm font-heading font-extrabold text-zinc-900/30 uppercase">Previous</div>
      <a class="font-heading font-extrabold text-zinc-900/80" href="/bootcamp/native-auth">Native Authentication <span class="absolute inset-0"></span></a>
    </div>
  
      <div class="lg:col-start-2 relative space-y-1 p-4 rounded border border-zinc-900/10 shadow transition hover:bg-zinc-900/5">
      <div class="text-sm font-heading font-extrabold text-zinc-900/30 uppercase">Next</div>
      <a class="font-heading font-extrabold text-zinc-900/80" href="/bootcamp/native-editing-modal">Editing in a Modal <span class="absolute inset-0"></span></a>
    </div>
  </div>
              </main>
    </div>
  </div>

        <footer class="px-6 py-4 sm:px-20 sm:py-10 flex items-center space-x-2 justify-between">
          <p class="text-base text-center w-full">
            Turbo Laravel is maintained by <a href="https://tonysm.com" class="underline text-zinc-900/90">Tony Messias</a>. This is a <em>community project</em>, therefore not affiliated with Laravel nor Hotwire.
          </p>
        </footer>
    </body>
</html>
